"use strict";function insertAtCaret(e,t){var n=document.getElementById(e),a=n.scrollTop,i=0,c=n.selectionStart||"0"==n.selectionStart?"ff":document.selection?"ie":!1;if("ie"==c){n.focus();var o=document.selection.createRange();o.moveStart("character",-n.value.length),i=o.text.length}else"ff"==c&&(i=n.selectionStart);var r=n.value.substring(0,i),l=n.value.substring(i,n.value.length);if(n.value=r+t+l,i+=t.length,"ie"==c){n.focus();var o=document.selection.createRange();o.moveStart("character",-n.value.length),o.moveStart("character",i),o.moveEnd("character",0),o.select()}else"ff"==c&&(n.selectionStart=i,n.selectionEnd=i,n.focus());n.scrollTop=a}function inject_email_template(e,t){$.each(t,function(t,n){t=t.replace("email_template_",""),n&&e.indexOf(t)>-1&&$("#"+t).val(n)})}$(document).ready(function(){$(".dropdown-toggle").click(function(e){var t=$(this).next(".dropdown-menu"),n=e.pageX+20,a=e.pageY+20,i=t.width(),c=t.height(),o=$(window).width()-(n+i),r=$(window).height()-(a+c);20>r&&t.css({top:"auto",bottom:"100%"})}),$("html").click(function(){$(".dropdown-menu:visible").not(".datepicker").removeAttr("style")});var e;$(".text-tag").bind("click",function(){var t=this.getAttribute("data-tag");return insertAtCaret(e.id,t),!1}),$(".taggable").on("focus",function(){e=this});var t=$(".main-area").height(),n=$(window).height();$(".sidebar").height(t>n?t:n-50)});